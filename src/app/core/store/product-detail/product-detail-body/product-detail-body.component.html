<div>
  <ng-container *ngIf="productDetail?.isCampaign">
    <div
      class="d-flex justify-content-between font-size-large font-weight-bold mb-2 blue-4f-text bold-text"
    >
      <span>{{ productDetail?.campaignName || 'Precio Scotiabank' }}</span>
      <span>{{ productDetail?.campaignPrice | currency:'S/' }}</span>
    </div>
    <div
      class="d-flex justify-content-between font-size-large mb-2 blue-4f-text"
      *ngIf="productDetail?.campaignPrice !== productDetail?.special_price"
    >
      <span>Precio Luxury</span>
      <span>{{ productDetail?.special_price | currency:'S/' }}</span>
    </div>
  </ng-container>
  <ng-container *ngIf="productDetail?.isGiftCard && !productDetail?.isCampaign">
    <div
      class="d-flex justify-content-between font-size-large font-weight-bold mb-2 blue-4f-text bold-text"
    >
      <span>{{ productDetail?.giftCardName || 'Precio Scotiabank' }}</span>
      <span>{{ productDetail?.giftCardPrice | currency:'S/' }}</span>
    </div>
    <div
      class="d-flex justify-content-between font-size-large mb-2 blue-4f-text"
      *ngIf="productDetail?.giftCardPrice !== productDetail?.special_price"
    >
      <span>Precio Luxury</span>
      <span>{{ productDetail?.special_price | currency:'S/' }}</span>
    </div>
  </ng-container>
  <ng-container
    *ngIf="!productDetail?.isCampaign && !productDetail?.isGiftCard"
  >
    <div
      class="d-flex justify-content-between font-size-large mb-2 blue-4f-text font-weight-bold"
    >
      <span>Precio Luxury</span>
      <span>{{ productDetail?.special_price | currency:'S/' }}</span>
    </div>
  </ng-container>

  <div
    class="d-flex justify-content-between font-size-large mb-2"
    style="color: #a0a0a0"
  >
    <span>Precio normal</span>
    <span>{{ productDetail?.price | currency:'S/' }}</span>
  </div>
  <div
    class="d-flex justify-content-between font-size-large mb-4 blue-4f-text"
    *ngIf="productDetail?.discount > 0"
  >
    <span>Descuento</span>
    <span>{{ productDetail?.discount | number:'1.0-0' }}%</span>
  </div>
  <div class="d-block d-md-flex justify-content-between align-items-start">
    <div class="d-flex flex-1 flex-column">
      <div *ngIf="!hasVariation" class="d-flex">
        <div class="w-auto flex-1 mr-2 mr-lg-0">
          <select
            class="blue-4f-border blue-4f-text form-control h-100 w-100 font-size-normal bold-text py-2 br-10"
            [(ngModel)]="quantity"
          >
            <option *ngFor="let num of numbersForSelect" [value]="num">
              Cantidad: {{ num }}
            </option>
          </select>
        </div>
        <div class="w-auto flex-1 d-block d-md-none">
          <app-button
            class="h-100"
            [type]="''"
            [color]="''"
            [label]="'Agregar a favoritos'"
            [prefixIcon]="'heart'"
            (onClick)="addToFavourites()"
            [bold]="true"
            [size]="'100'"
            [rounded]="true"
            [additionalClasses]="'py-2 px-0 px-md-1 shadow-none h-100 blue-4f-border blue-4f-text br-10'"
            *ngIf="!loadingAddWishlist && !productDetail?.favorited"
          ></app-button>
          <app-button
            class="h-100"
            [type]="''"
            [color]="''"
            [label]="'Remover de favoritos'"
            [prefixIcon]="'heart-broken'"
            (onClick)="removeFromFavourites()"
            [bold]="true"
            [size]="'100'"
            [rounded]="true"
            [additionalClasses]="'py-2 px-0 px-md-1 shadow-none h-100 blue-4f-border blue-4f-text br-10'"
            *ngIf="!loadingAddWishlist && productDetail?.favorited"
          ></app-button>
          <!-- before md without variations -->
          <ng-container *ngIf="loadingAddWishlist">
            <app-global-loading class="d-block d-md-none"></app-global-loading>
          </ng-container>
        </div>
      </div>
      <ng-container *ngIf="hasVariation">
        <div class="mb-3" *ngFor="let variation of productDetail.variation_father">
          <div class="mb-2">
            <span class="primary-blue-text">
              {{variation.variation_name}}: 
              <strong>{{ variation.type === 'COLOR' ? getColorDescription(variation.variation_name) : selectedVariationForm(variation.variation_name) }}</strong>
            </span>
          </div>
          <div class="d-flex" *ngIf = "variation.type === 'COLOR'">
            <app-color-type-variation
              class="d-block mr-2"
              *ngFor="let color of variation.value"
              [colorSelected]="selectedVariationForm(variation.variation_name)"
              [color]="color"
              (onSelectVariation)="selectVariation($event)"
              [variationName]="variation.variation_name"
            ></app-color-type-variation>
          </div>
          <div class="d-flex" *ngIf = "variation.type === 'TEXT'">
            <app-text-type-variation
              *ngFor="let text of variation.value"
              [textVariationSelected]="selectedVariationForm(variation.variation_name)"
              [textVariation]="text"
              (onSelectVariation)="selectVariation($event)"
              [variationName]="variation.variation_name"
            ></app-text-type-variation>
          </div>
        </div>
        <!-- <div class="mb-3" *ngIf="productDetail.colors.length">
          <div class="mb-2">
            <span class="primary-blue-text">
              Color: <strong>{{ colorSelected?.colorName | titlecase }}</strong>
            </span>
          </div>
          <div class="d-flex">
            <app-color-type-variation
              class="d-block mr-2"
              *ngFor="let color of productDetail.colors"
              [colorSelected]="colorSelected"
              [color]="color"
              (onSelectVariation)="selectVariation($event)"
            ></app-color-type-variation>
          </div>
        </div> -->
        <!-- <div class="mb-3" *ngIf="productDetail.sizes.length">
          <div class="mb-2">
            <span class="primary-blue-text">Talla:
              <strong>{{ sizeSelected?.value }}</strong>
			      </span>
          </div>
          <div class="d-flex flex-wrap">
            <app-text-type-variation
              *ngFor="let size of productDetail.sizes"
              [textVariationSelected]="sizeSelected"
              [textVariation]="size"
              [typeTextVariation]="variationsType.size"
              (onSelectVariation)="selectVariation($event)"
            ></app-text-type-variation>
          </div>
        </div> -->
        <!-- <div class="mb-3" *ngIf="productDetail.imagesVariation.length">
          <div class="mb-2">
            <span class="primary-blue-text">Imagen:</span>
          </div>
          <div class="d-flex flex-wrap">
            <app-image-type-variation
              *ngFor="let image of productDetail.imagesVariation"
              [image]="image"
              [imageSelected]="imageSelected"
              (onSelectVariation)="selectVariation($event)"
            ></app-image-type-variation>
          </div>
        </div> -->
      </ng-container>
    </div>
    <div class="mx-10 d-none d-md-block"></div>
    <div class="flex-1 d-flex flex-column">
      <div class="d-flex flex-row flex-md-column">
        <div class="mb-md-2 flex-1 mr-2 mr-md-0" *ngIf="hasVariation">
          <select
            class="blue-4f-border blue-4f-text form-control font-size-normal h-100 w-100 pl-1 pr-0 py-2 br-10 bold-text"
            [(ngModel)]="quantity"
            [disabled]="addCartDisabled()"
          >
            <option *ngFor="let num of numbersForSelect" [value]="num">
              Cantidad: {{ num }}
            </option>
          </select>
        </div>
        <div class="flex-1 h-100">
          <app-button
            [ngClass]="{'d-none d-md-block': !this.productDetail?.colors?.length && !this.productDetail?.sizes?.length }"
            class="h-100"
            [type]="''"
            [disabled]="addFavouriteDisabled()"
            [color]="''"
            [bold]="true"
            [label]="'Agregar a favoritos'"
            [prefixIcon]="'heart'"
            (onClick)="addToFavourites()"
            [size]="'100'"
            [rounded]="true"
            [additionalClasses]="'py-2 px-0 px-md-1 shadow-none blue-4f-text blue-4f-border h-100 br-10'"
            *ngIf="!loadingAddWishlist && !productDetail?.favorited"
          ></app-button>
          <app-button
            [ngClass]="{'d-none d-md-block': !productDetail?.colors?.length && !productDetail?.sizes?.length}"
            class="h-100"
            [type]="''"
            [disabled]="addFavouriteDisabled()"
            [color]="''"
            [label]="'Remover de favoritos'"
            [prefixIcon]="'heart-broken'"
            (onClick)="removeFromFavourites()"
            [size]="'100'"
            [bold]="true"
            [rounded]="true"
            [additionalClasses]="'py-2 px-0 px-md-4 shadow-none blue-4f-text blue-4f-border br-10'"
            *ngIf="!loadingAddWishlist && productDetail?.favorited"
          ></app-button>
          <!-- loading after md -->
          <ng-container *ngIf="loadingAddWishlist">
            <app-global-loading class="d-none d-md-block"></app-global-loading>
          </ng-container>

          <!-- loading before md with colors or sizes -->
          <ng-container
			  *ngIf="loadingAddWishlist && (productDetail?.colors?.length || productDetail?.sizes?.length) "
          >
            <app-global-loading class="d-block d-md-none"></app-global-loading>
          </ng-container>
        </div>
      </div>
      <app-button
        class="my-2"
        [label]="productDetail?.stock > 0 ? 'Agregar al carrito' : 'En reposiciÃ³n'"
        [disabled]="addCartDisabled()"
        [bold]="true"
        [prefixIcon]="productDetail?.stock > 0 ? 'shopping-cart' : ''"
        [size]="'100'"
        [rounded]="true"
        (onClick)="addToCart()"
        [additionalClasses]="'py-2 px-md-1 font-size-normal br-10'"
        *ngIf="!loadingAddCart"
      ></app-button>
      <ng-container *ngIf="loadingAddCart">
        <app-global-loading class="mt-2"></app-global-loading>
      </ng-container>
    </div>
  </div>
  <div class="mt-3 mt-md-5">
    <div *ngFor="let spec of productDetail?.detail_list" class="mb-2 mb-lg-3">
      <app-single-accordion
        *ngIf="spec.title"
        [accordion]="{ title: spec.title, content: spec.description }"
        [bold]="true"
        additionalContentClasses="mt-3"
      ></app-single-accordion>
    </div>
  </div>
</div>
