<app-modal-header
  *ngIf="!address"
  [title]="'Nueva dirección de envío'"
  [returnCondition]="true"
  (onClose)="closeModal()"
  (onReturn)="returnModal()"
></app-modal-header>
<app-modal-header
  *ngIf="address"
  [title]="'Editar dirección de envío'"
  [returnCondition]="true"
  (onClose)="closeModal()"
  (onReturn)="returnModal()"
></app-modal-header>
<div class="modal-body">
  <form [formGroup]="addressForm">
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="form-group">
          <div class="input-block">
            <label><strong>Nombre de la dirección</strong></label>
            <select
              class="form-control"
              id="type_address"
              formControlName="type_address"
              mdbInput
              mdbValidate
            >
              <option [value]="null" selected disabled></option>
              <option *ngFor="let type of typeAddressList" [value]="type._id">
                {{type.value}}
              </option>
            </select>
          </div>
          <div class="input-block mt-3">
            <label for="name"><strong>Dirección</strong></label>
            <input
              type="text"
              id="address"
              formControlName="address"
              class="form-control"
              mdbInput
              mdbValidate
            />
          </div>
          <div class="input-block mt-3">
            <label><strong>Departamento</strong></label>
            <select
              class="form-control"
              id="department"
              formControlName="department"
              mdbInput
              mdbValidate
            >
              <option [value]="null" selected disabled></option>
              <option
                *ngFor="let department of departmentsList"
                [value]="department._id"
              >
                {{department.name}}
              </option>
            </select>
          </div>
          <div class="input-block mt-3">
            <label><strong>Provincia</strong></label>
            <select
              class="form-control"
              id="province"
              formControlName="province"
              mdbInput
              mdbValidate
            >
              <option [value]="null" selected disabled></option>
              <option
                *ngFor="let province of provinceList"
                [value]="province._id"
              >
                {{province.name}}
              </option>
            </select>
          </div>
          <div class="input-block mt-3">
            <label><strong>Distrito</strong></label>
            <select
              class="form-control"
              id="district"
              formControlName="district"
              mdbInput
              mdbValidate
            >
              <option [value]="null" selected disabled></option>
              <option
                *ngFor="let district of districtList"
                [value]="district._id"
              >
                {{district.name}}
              </option>
            </select>
          </div>
          <div class="input-block mt-3">
            <label for="name"><strong>Referencia</strong></label>
            <input
              type="text"
              id="reference"
              formControlName="reference"
              class="form-control"
              mdbInput
              mdbValidate
            />
          </div>
          <div class="input-block mt-3">
            <label for="name"><strong>Teléfono</strong></label>
            <input
              type="text"
              id="cellphone"
              formControlName="cellphone"
              class="form-control"
              mdbInput
              mdbValidate
              NoPaste
              OnlyNumber="true"
            />
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
<div class="modal-footer">
  <div class="w-100">
    <app-modal-loading *ngIf="loadingNewAddress"></app-modal-loading>
    <app-button
      class="d-block w-100"
      [label]="'Agregar'"
      *ngIf="!address && !loadingNewAddress"
      [rounded]="true"
      [bold]="true"
      [textSize]="2"
      [size]="100"
      [disabled]="addressForm.invalid"
      [additionalClasses]="'ls-1 py-3'"
      (onClick)="addAddress()"
    ></app-button>
  </div>
  <div class="w-100">
    <app-modal-loading *ngIf="loadingAddressUpdating"></app-modal-loading>
    <app-button
      class="d-block w-100"
      [label]="'Actualizar'"
      *ngIf="address && !loadingAddressUpdating"
      [rounded]="true"
      [bold]="true"
      [textSize]="2"
      [size]="100"
      [disabled]="addressForm.invalid"
      [additionalClasses]="'ls-1 py-3'"
      (onClick)="updateAddres()"
    ></app-button>
  </div>
  <div class="w-100">
    <app-modal-loading *ngIf="loadingAddressDeleting"></app-modal-loading>
    <app-button
      class="d-block w-100"
      [label]="'Eliminar'"
      *ngIf="address && !loadingAddressDeleting"
      [rounded]="true"
      [bold]="true"
      [textSize]="2"
      [size]="100"
      [disabled]="addressForm.invalid"
      [additionalClasses]="'ls-1 py-3 red'"
      (onClick)="deleteAddress()"
    ></app-button>
  </div>
</div>
